(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{471:function(e,t,n){"use strict";n.r(t);var r=n(23),o=n(12),h=(n(41),n(341),n(13),n(30),n(81),n(29),n(422),n(337),n(429)),d=n(433),base=n(5),c=(n(438),n(443),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(434).GifWriter);function l(element,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=t*n,canvas=document.createElement("canvas");canvas.width=element.width,canvas.height=element.height;var l=canvas.getContext("2d"),m=new Uint8Array(canvas.width*canvas.height*d*5),f=new Uint8Array(canvas.width*canvas.height),w=new c(m,canvas.width,canvas.height,{loop:0}),v=0;return new Promise(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(o){var data,x,y,S,j,R,g,b,M,O,z,P,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e(v/d),l.drawImage(element,0,0),data=l.getImageData(0,0,canvas.width,canvas.height).data,x=[],y=0,S=0,j=data.length;y<j;y+=4,S++)R=Math.floor(data[y+0]/r)*r,g=Math.floor(data[y+1]/r)*r,b=Math.floor(data[y+2]/r)*r,M=R<<16|g<<8|b<<0,-1===(O=x.indexOf(M))?(f[S]=x.length,x.push(M)):f[S]=O;for(z=1;z<x.length;)z<<=1;if(x.length=z,P=100/n,k={palette:new Uint32Array(x),delay:P},w.addFrame(0,0,canvas.width,canvas.height,f,k),v++,h&&h(v/d),!(v<d)){t.next=18;break}return t.next=16,setTimeout(c,0,o);case 16:t.next=19;break;case 18:o(m.subarray(0,w.end()));case 19:case"end":return t.stop()}}),t)})));function c(e){return t.apply(this,arguments)}return c}())}var m={props:{texture:{type:[String,Object],default:"images/earth_1600.jpg"},fragmentShader:String,vertexShader:String,uniform:{type:Object,default:function(){return{}}},cameraPos:Object,zoom:{type:Number,default:100}},created:function(){this.camera=new h.d(-1.05,1.05,1.05,-1.05,.1,10),this.camera.position.set(0,0,4),this.controls=null,this.scene=new h.f,this.sphere=new h.h(1,128,64);var e=new h.n;e.setPixelRatio(window.devicePixelRatio),e.setPixelRatio(window.devicePixelRatio),this.renderer=e,this.animated=!0},mounted:function(){var th=this;this.uniform.txtr={value:(new h.k).load(this.texture)};var e=new h.g({uniforms:this.uniform,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),t=new h.c(this.sphere,e);t.position.x=0,t.position.y=0,this.scene.add(t),this.$el.appendChild(this.renderer.domElement);var n=this.controls=new d.a(this.camera,this.$el);n.rotateSpeed=1,n.zoomSpeed=1.2,n.panSpeed=.8,n.noZoom=!0,n.enableZoom=!1,n.enablePan=!1,n.noPan=!0,n.staticMoving=!0,n.dynamicDampingFactor=.3,n.keys=[65,83,68],n.addEventListener("change",(function(){th.render()})),window.addEventListener("resize",(function(){th.onWindowResize()})),this.animate(),th.onWindowResize(),$('[data-widget="pushmenu"]').on("collapsed.lte.pushmenu shown.lte.pushmenu",(function(){setTimeout((function(){th.onWindowResize()}),300)}))},methods:{render:function(){this.renderer.render(this.scene,this.camera)},animate:function(){var th=this;requestAnimationFrame((function(){th.animate()})),th.controls&&th.controls.update(),this.animated&&th.render()},onWindowResize:function(){this.camera.aspect=1,this.camera.updateProjectionMatrix();var e=Math.min(100,Math.max(10,this.zoom)),t=Math.floor(this.$el.offsetWidth*e/100);this.renderer.setSize(t,t),this.controls},download:function(e){var t=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,h,th,d,c,link;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:10,h=t.length>2&&void 0!==t[2]?t[2]:30,th=n,n.animated=!1,r.next=6,l(n.renderer.domElement,(function(progress){e&&e(progress),th.render()}),o,h,25);case 6:d=r.sent,c=new Blob([d],{type:"image/gif"}),n.animated=!0,(link=document.createElement("a")).href=URL.createObjectURL(c),link.download="animation.gif",link.dispatchEvent(new MouseEvent("click"));case 13:case"end":return r.stop()}}),r)})))()}},watch:{cameraPos:{deep:!0,handler:function(e){var t=e||{},n=Object(base.d)(t.lon||0),o=Object(r.a)(n,2),h=o[0],d=o[1],c=Object(base.d)(t.lat||0),l=Object(r.a)(c,2),m=l[0],f=l[1],w=t.distance||4;this.camera.position.set(w*f*d,w*m,w*f*h)}},zoom:function(e){var t=Math.min(100,Math.max(10,e)),n=Math.floor(this.$el.offsetWidth*t/100);this.renderer.setSize(n,n)}}},f=m,w=n(8),component=Object(w.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{display:"flex","justify-content":"center"}})}),[],!1,null,null,null);t.default=component.exports}}]);