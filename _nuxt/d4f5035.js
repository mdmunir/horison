(window.webpackJsonp=window.webpackJsonp||[]).push([[20,10],{503:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n(13),r=(n(42),n(509),n(12),n(510),n(511),n(512),n(513),n(514),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(90),n(536).GifWriter);function l(element,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.duration||10,l=e.fps||30,c=e.depth||25,d=n*l,canvas=document.createElement("canvas");canvas.width=element.width,canvas.height=element.height;var f=canvas.getContext("2d"),m=new Uint8Array(canvas.width*canvas.height*d*5),h=new Uint8Array(canvas.width*canvas.height),v=new r(m,canvas.width,canvas.height,{loop:0}),y=0;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(o){var data,r,w,x,_,M,g,b,C,S,D,z,H;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t(y/d)){e.next=3;break}return o(m.subarray(0,v.end())),e.abrupt("return");case 3:for(f.drawImage(element,0,0),data=f.getImageData(0,0,canvas.width,canvas.height).data,r=[],w=0,x=0,_=data.length;w<_;w+=4,x++)M=Math.floor(data[w+0]/c)*c,g=Math.floor(data[w+1]/c)*c,b=Math.floor(data[w+2]/c)*c,C=M<<16|g<<8|b<<0,-1===(S=r.indexOf(C))?(h[x]=r.length,r.push(C)):h[x]=S;for(D=1;D<r.length;)D<<=1;if(r.length=D,z=100/l,H={palette:new Uint32Array(r),delay:z},v.addFrame(0,0,canvas.width,canvas.height,h,H),y++,H.callback&&H.callback(y/d),!(y<d)){e.next=20;break}return e.next=18,setTimeout(n,0,o);case 18:e.next=21;break;case 20:o(m.subarray(0,v.end()));case 21:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}())}},504:function(t,e,n){"use strict";e.a="varying vec2 vUv;\nvoid main()\n{\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}"},542:function(t,e,n){var content=n(560);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(44).default)("998af980",content,!0,{sourceMap:!1})},553:function(t,e,n){"use strict";n.r(e);n(351),n(12),n(30),n(90);var o=n(507),r=n(508),l=(n(4),n(503),n(504)),c={props:{type:{type:String,default:"mer"},texture:{type:[String,Object],default:"images/earth_1600.jpg"},uniform:{type:Object,default:function(){return{}}},scale:{type:Number,default:100}},data:function(){var t={globe:new o.j(1,128,64),mer:new o.f(2,2)};this.uniform.txtr={value:(new o.m).load(this.texture)};var e=new o.i({uniforms:this.uniform,vertexShader:l.a,fragmentShader:"const int orde = 4;\nuniform float SHa[orde];\nuniform float SDec[orde];\nuniform float MHa[orde];\nuniform float MDec[orde];\nuniform float EqTime[orde];\nuniform float hp;\nuniform float eot;\nuniform float elongation; // derajat\nuniform float altitude; // derajat\nuniform sampler2D txtr;\n\nvarying vec2 vUv;\nconst float pi = 3.14159;\nconst float R2D = 57.29578;\nconst float ER = 0.02;\n\nstruct horizon {\n    float alt;\n    float az;\n};\n\nhorizon fAltAz(float h, float d, float lat){\n    return horizon(asin(sin(lat)*sin(d) + cos(lat)*cos(d)*cos(h)),\n        atan(sin(h), cos(h) * sin(lat) - (sin(d) / cos(d)) * cos(lat)));\n}\n\nfloat horner(float t, float c[orde]){    \n    int i = c.length() - 1;\n    float res = c[i];\n    while(i > 0){\n        i--;\n        res = res*t + c[i];\n    }\n    return res;\n}\n\nvoid main(void){\n    vec2 position = -1.0 + 2.0 * vUv;\n    float lat = radians(position.y * 90.0);\n    float lng = radians(-position.x * 180.0);\n    vec3 color = texture2D(txtr, vUv).rgb;\n    \n    float t = lng/(2.0*pi);\n    t = t - horner(t, EqTime);\n    float delta = horner(t, SDec);\n    float cosHa = (-0.014538081 - sin(lat)*sin(delta))/(cos(lat)*cos(delta));\n    float fac = 0.2;\n    if(cosHa > -1.0 && cosHa < 1.0){ // ada terbenam\n        float ha = acos(cosHa);\n        t = t + ha/(2.0 * pi);\n\n        float sHa = horner(t, SHa);\n        float sDec = horner(t, SDec);\n        float mHa = horner(t, MHa);\n        float mDec = horner(t, MDec);\n        \n        horizon sun = fAltAz(sHa-lng, sDec, lat);\n        horizon moon = fAltAz(mHa-lng, mDec, lat);\n\n        moon.alt = moon.alt - hp*cos(moon.alt) + 0.00989;\n        sun.alt = sun.alt + 0.0145;\n\n        float alt = (moon.alt - sun.alt) * R2D;\n        float cosElo = sin(sun.alt)*sin(moon.alt) + cos(sun.alt)*cos(moon.alt) * cos(sun.az - moon.az);\n        float elo = acos(cosElo) * R2D;\n\n        if(alt > altitude && abs(elo-elongation) < ER * 0.5){\n            gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0 );\n        }else if(alt >= 0.0 && fract(alt) < ER){\n            gl_FragColor = vec4(0.8, 0.8, 0.0, 1.0 );\n        }else if(alt > altitude && elo > elongation) {\n            gl_FragColor = vec4(color.x, color.y, color.z, 1.0 );\n        }else if(alt > 0.0){\n            gl_FragColor = vec4(color.x, color.y * 0.5, color.z * 0.5, 1.0 );\n        }else{\n            fac = 0.3;\n            gl_FragColor = vec4(color.x * fac, color.y * fac, color.z * fac, 1.0 );\n        }\n    }else{\n        gl_FragColor = vec4(color.x * fac, color.y * fac, color.z * fac, 1.0 );\n    }\n}"}),data={animated:!0,camera:new o.e(-1.01,1.01,1.01,-1.01,.1,10),controls:null,scene:new o.h,renderer:new o.p,models:t,material:e,mesh:new o.d(t[this.type],e)};return data.camera.position.set(0,0,4),data.renderer.setPixelRatio(window.devicePixelRatio),data.mesh.position.x=0,data.mesh.position.y=0,data.scene.add(data.mesh),data},mounted:function(){var th=this;this.$el.appendChild(this.renderer.domElement),this.animate(),this.resize(),this.$nuxt.$on("pushmenu-click",(function(){th.resize(300)})),window.addEventListener("resize",(function(){th.resize()}));var t=this.controls=new r.a(this.camera,this.$el);t.rotateSpeed=1,t.zoomSpeed=1.2,t.panSpeed=.8,t.enableZoom=!1,t.enablePan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.keys=[65,83,68],t.autoRotate=!1,t.keys=[65,83,68],t.minZoom=1,t.maxZoom=5,t.addEventListener("change",(function(){th.render()})),t.enableRotate="globe"==this.type},methods:{render:function(){this.renderer.render(this.scene,this.camera)},animate:function(){var th=this;requestAnimationFrame((function(){th.animate()})),th.controls&&th.controls.update(),this.animated&&th.render()},doScale:function(t){var e=Math.min(100,Math.max(10,t)),n=Math.floor(this.$el.offsetWidth*e/100),o="mer"==this.type?n/2:n;this.renderer.setSize(n,o)},resize:function(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,th=this;setTimeout((function(){th.camera.aspect=1,th.camera.updateProjectionMatrix(),th.doScale(th.scale)}),time)},download:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},link=document.createElement("a");this.render(),link.href=this.renderer.domElement.toDataURL(),link.download=t.filename||"peta-tinggi-hilal.png",link.click()}},watch:{scale:function(t){this.doScale(t),this.render()},type:function(t){this.mesh.geometry=this.models[t],this.doScale(this.scale),this.controls.enableRotate="globe"==t,"globe"!=t&&this.camera.position.set(0,0,4),this.render()}}},d=c,f=n(8),component=Object(f.a)(d,(function(){return(0,this._self._c)("div",{staticStyle:{display:"flex","justify-content":"center"}})}),[],!1,null,null,null);e.default=component.exports},559:function(t,e,n){"use strict";n(542)},560:function(t,e,n){var o=n(43)(!1);o.push([t.i,"table.element th{margin-left:5px}",""]),t.exports=o},592:function(t,e,n){"use strict";n.r(e);n(25),n(33),n(12),n(351),Math.sin,Math.cos,Math.tan,Math.PI,Math.abs;var o={props:{hilal:Object,year:Number,month:Number,monthName:String},data:function(){return{uniform:{eot:{value:0},hp:{value:0},altitude:{value:3},elongation:{value:6.4},SHa:{value:[0]},SDec:{value:[0]},MHa:{value:[0]},MDec:{value:[0]},EqTime:{value:[0]}},scale:100,model:"mer",save:{progress:0},day:0}},mounted:function(){this.updateDay(this.day)},methods:{updateDay:function(t){var e=this.hilal.fragment(t),n=this.uniform;n.eot.value=e.eot,n.hp.value=e.hp,n.SHa.value=e.SHa,n.SDec.value=e.SDec,n.MHa.value=e.MHa,n.MDec.value=e.MDec,n.EqTime.value=e.EqTime},simpan:function(){this.$refs.map.download({filename:"peta-hilal-".concat(this.monthName,".png")})}},watch:{day:function(t){this.updateDay(t)}}},r=(n(559),n(8)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("lte-card",{on:{resize:function(e){return t.$refs.map.resize(300)}},scopedSlots:t._u([{key:"tools",fn:function(){return[e("ul",{staticClass:"pagination pagination-sm float-left"},t._l(3,(function(n){return e("li",{staticClass:"page-item",class:{active:t.day==n-2}},[e("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.day=n-2}}},[t._v(t._s(n-2))])])})),0),t._v(" "),e("button",{staticClass:"btn btn-tool",on:{click:t.simpan}},[e("i",{staticClass:"fas fa-save"})])]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-lg-4"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],staticStyle:{width:"100%"},attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.scale},on:{__r:function(e){t.scale=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"col-6 col-lg-4"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.model=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"mer"}},[t._v("Mercator")]),t._v(" "),e("option",{attrs:{value:"globe"}},[t._v("Globe")])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("a-hilal-map",{ref:"map",attrs:{type:t.model,scale:t.scale,uniform:t.uniform}})],1)])])],1),t._v(" "),e("portal",{attrs:{to:"modals"}},[e("lte-modal",{ref:"popupSave",attrs:{size:"sm","data-backdrop":"static",title:"Download GIF"},on:{hide:function(e){t.save.cancel=!0}}},[e("p",[t._v(t._s(t.save.progress)+"% Complete")]),t._v(" "),e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar bg-primary progress-bar-striped",style:{width:t.save.progress+"%"},attrs:{role:"progressbar","aria-valuenow":t.save.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e("span",{staticClass:"sr-only"},[t._v(t._s(t.save.progress)+"% Complete")])])])])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AHilalMap:n(553).default,LteCard:n(350).default,LteModal:n(355).default})}}]);