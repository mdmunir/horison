(window.webpackJsonp=window.webpackJsonp||[]).push([[27,11],{497:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n(13),r=(n(42),n(508),n(12),n(509),n(510),n(511),n(512),n(513),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(90),n(535).GifWriter);function l(element,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.duration||10,l=e.fps||30,c=e.depth||25,f=n*l,canvas=document.createElement("canvas");canvas.width=element.width,canvas.height=element.height;var d=canvas.getContext("2d"),h=new Uint8Array(canvas.width*canvas.height*f*5),m=new Uint8Array(canvas.width*canvas.height),v=new r(h,canvas.width,canvas.height,{loop:0}),_=0;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(o){var data,r,y,x,w,C,g,b,L,D,M,k,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t(_/f)){e.next=3;break}return o(h.subarray(0,v.end())),e.abrupt("return");case 3:for(d.drawImage(element,0,0),data=d.getImageData(0,0,canvas.width,canvas.height).data,r=[],y=0,x=0,w=data.length;y<w;y+=4,x++)C=Math.floor(data[y+0]/c)*c,g=Math.floor(data[y+1]/c)*c,b=Math.floor(data[y+2]/c)*c,L=C<<16|g<<8|b<<0,-1===(D=r.indexOf(L))?(m[x]=r.length,r.push(L)):m[x]=D;for(M=1;M<r.length;)M<<=1;if(r.length=M,k=100/l,S={palette:new Uint32Array(r),delay:k},v.addFrame(0,0,canvas.width,canvas.height,m,S),_++,S.callback&&S.callback(_/f),!(_<f)){e.next=20;break}return e.next=18,setTimeout(n,0,o);case 18:e.next=21;break;case 20:o(h.subarray(0,v.end()));case 21:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}())}},498:function(t,e,n){"use strict";e.a="varying vec2 vUv;\nvoid main()\n{\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}"},552:function(t,e,n){var content=n(577);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(44).default)("00acb8a7",content,!0,{sourceMap:!1})},554:function(t,e,n){"use strict";n.r(e);var o=n(26),r=n(13),l=(n(42),n(351),n(12),n(30),n(90),n(31),n(490),n(153),n(506)),c=n(507),base=n(4),f=n(497),d=n(498),h={props:{type:{type:String,default:"globe"},texture:{type:[String,Object],default:"images/earth_white_1280.png"},uniform:{type:Object,default:function(){return{}}},cameraPos:Object,scale:{type:Number,default:100},control:{type:Boolean,default:!0},path:{type:Boolean,default:!0}},data:function(){var t={globe:new l.j(1,128,64),mer:new l.f(2,2),ae:new l.a(1,64)};this.uniform.txtr={value:(new l.m).load(this.texture)},this.uniform.isAe={value:"ae"==this.type?1:0},this.uniform.isPath={value:this.path?1:0};var e=new l.i({uniforms:this.uniform,vertexShader:d.a,fragmentShader:"const float THRESHOLD = 0.0015;\nconst float THRESHOLD2 = 0.0025;\n\nuniform float esq;\nuniform float mu;\nuniform float x;\nuniform float y;\nuniform float cosd;\nuniform float sind;\nuniform float l1;\nuniform float l2;\nuniform float tanf1;\nuniform float tanf2;\nuniform float deltaTMu;\nuniform int isAe;\nuniform int isPath;\n\nuniform float X[4];\nuniform float Y[4];\nuniform float D[4];\nuniform float MU[4];\nuniform float L1[4];\nuniform float L2[4];\nuniform float DX[4];\nuniform float DY[4];\nuniform float DD[4];\nuniform float DMU[4];\n//uniform float DL1[4];\n//uniform float DL2[4];\nuniform sampler2D txtr;\nvarying vec2 vUv;\n\nfloat horner(float t, float series[4]){\n    int i = 3;\n    float result = series[i];\n    while(i > 0){\n        i--;\n        result = result*t + series[i];\n    }\n    return result;\n}\n\nvoid main(void){\n    vec2 position = -1.0 + 2.0 * vUv;\n    float lat = radians(position.y * 90.0);\n    float lon = radians(position.x * 180.0);\n    vec2 pos = vec2(vUv.x, vUv.y);\n    if(isAe == 1){\n        float r = sqrt(position.y*position.y+position.x*position.x);\n        lat = radians(90.0 - 180.0*r);    \n        lon = atan(position.y,position.x);        \n        pos.x = lon / 3.14159 / 2.0 + 0.5;\n        pos.y = 1.0 - r;\n    }\n\n    vec3 color = texture2D(txtr, pos).rgb;\n    float cosLat = cos(lat);\n    float sinLat = sin(lat);\n    float C = 1.0 / sqrt(1.0 - esq * sinLat * sinLat);\n    float S = (1.0 - esq) * C;\n    float tmp = atan(0.99664719 * tan(lat));\n    float rhoS = 0.99664719*sin(tmp);\n    float rhoC = cos(tmp);\n\n    int pathFound = 0;\n    if(isPath == 1){\n        float t = 0.0;\n        float dt = 0.0;\n        float _x;\n        float _y;\n        float _d;\n        float _mu;\n        float _dx;\n        float _dy;\n        float _dd;\n        float _dmu;\n        float _cosd;\n        float _sind;\n        float _h;\n        float _sinh;\n        float _cosh;\n        float _xi;\n        float _eta;\n        float _zeta;\n        float _dxi;\n        float _deta;\n        float _u;\n        float _v;\n        float _a;\n        float _b;\n        float _n2;\n\n        int mid = 0;\n        for(int it=0; it < 15; it++){\n            _x = horner(t, X);\n            _y = horner(t, Y);\n            _d = horner(t, D);\n            _mu = horner(t, MU);\n            _dx = horner(t, DX);\n            _dy = horner(t, DY);\n            _dd = horner(t, DD);\n            _dmu = horner(t, DMU);\n            //_dl1 = horner(t, DL1);\n            //_dl2 = horner(t, DL2);\n            _cosd = cos(_d);\n            _sind = sin(_d);\n\n            _h = _mu + lon - deltaTMu;\n            _sinh = sin(_h);\n            _cosh = cos(_h);\n\n            //_xi = rhoC * _sinh;\n            //_eta = rhoS * _cosd - rhoC * _cosh * _sind;\n            //_zeta = rhoS * _sind + rhoC * _cosh * _cosd;\n            _xi = C * cosLat * sin(_h);\n            _eta = S * sinLat * _cosd - C * cosLat * _sind * cos(_h);\n            _zeta = S * sinLat * _sind + C * cosLat * _cosd * cos(_h);\n\n            _dxi = _dmu * rhoC * _cosh;\n            _deta = _dmu * _xi * _sind - _zeta * _dd;\n            _u = _x - _xi;\n            _v = _y - _eta;\n            _a = _dx - _dxi;\n            _b = _dy - _deta;\n            _n2 = _a*_a + _b*_b;\n\n            dt = (_u*_a + _v*_b) / _n2;\n            t -= dt;\n            if(dt > -0.00001 && dt < 0.00001){\n                mid = 1;\n                break;\n            }\n        }\n        if(mid == 1 && _zeta >= 0.0){\n            float _m = sqrt(_u * _u + _v * _v);\n            float _l1 = horner(t, L1) - _zeta * tanf1;\n            float _l2 = horner(t, L2) - _zeta * tanf2;\n            //penumbra\n            if((_m - _l1) < THRESHOLD && (_m - _l1) > -THRESHOLD2){\n                gl_FragColor = vec4(0.0, 0.0, 0.8, 1.0 );\n                pathFound = 1;\n            }else if(_l2 > 0.0 && (_m - _l2) < THRESHOLD && (_m - _l2) > -THRESHOLD2){ // cincin\n                gl_FragColor = vec4(0.8, 0.0, 0.0, 1.0 );\n                pathFound = 1;\n            }else if(_l2 < 0.0 && (_m + _l2) < THRESHOLD && (_m + _l2) > -THRESHOLD2){ // total\n                gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0 );\n                pathFound = 1;\n            }\n        }\n    }\n    \n    if(pathFound == 0){\n        float theta = mu + lon;\n        float xi = C * cosLat * sin(theta);\n        float eta = S * sinLat * cosd - C * cosLat * sind * cos(theta);\n        float zeta = S * sinLat * sind + C * cosLat * cosd * cos(theta);\n        float u = x - xi;\n        float v = y - eta;\n        float m = sqrt(u * u + v * v);\n        float L1 = l1 - zeta * tanf1;\n        float L2 = l2 - zeta * tanf2;\n        if (zeta < 0.0){\n            float fac = 0.4;\n            gl_FragColor = vec4(color.x * fac, color.y * fac, color.z * fac, 1.0 );\n        } else if (L2 < 0.0 && m < -L2 && zeta > 0.0){\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0 );\n        } else if (L2 > 0.0 && m < L2 && zeta > 0.0){\n            gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0 );\n        } else if (m < L1 && zeta > 0.0){\n            float f = 0.7 - 0.0 * (L1 - m) / L1;\n            gl_FragColor = vec4(color.x * f, color.y * f, color.z * f, 1.0 );\n        } else{\n            gl_FragColor = vec4( color.x, color.y, color.z, 1.0 );\n        }\n    }\n}"}),data={animated:!0,camera:new l.e(-1.05,1.05,1.05,-1.05,.1,10),controls:null,scene:new l.h,renderer:new l.p,models:t,material:e,mesh:new l.d(t[this.type],e)};return data.camera.position.set(0,0,4),data.renderer.setPixelRatio(window.devicePixelRatio),data.mesh.position.x=0,data.mesh.position.y=0,data.scene.add(data.mesh),data},mounted:function(){var th=this;this.$el.appendChild(this.renderer.domElement),this.animate(),this.resize(),this.$nuxt.$on("pushmenu-click",(function(){th.resize(300)})),window.addEventListener("resize",(function(){th.resize()}));var t=this.controls=new c.a(this.camera,this.$el);t.rotateSpeed=1,t.zoomSpeed=1.2,t.panSpeed=.8,t.enableZoom=!1,t.enablePan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.keys=[65,83,68],t.autoRotate=!1,t.addEventListener("change",(function(){th.render()})),t.enableRotate=this.control&&"globe"==this.type},methods:{render:function(){this.renderer.render(this.scene,this.camera)},animate:function(){var th=this;requestAnimationFrame((function(){th.animate()})),th.controls&&th.controls.update(),this.animated&&th.render()},doScale:function(t){var e=Math.min(100,Math.max(10,t)),n=Math.floor(this.$el.offsetWidth*e/100),o="mer"==this.type?n/2:n;this.renderer.setSize(n,o)},resize:function(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,th=this;setTimeout((function(){th.camera.aspect=1,th.camera.updateProjectionMatrix(),th.doScale(th.scale)}),time)},download:function(t){var e=arguments,n=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,th,l,c,link;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},th=n,n.animated=!1,o.next=5,Object(f.a)(n.renderer.domElement,(function(progress){if(t&&!1===t(progress))return!1;th.render()}),r);case 5:l=o.sent,c=new Blob([l],{type:"image/gif"}),n.animated=!0,(link=document.createElement("a")).href=URL.createObjectURL(c),link.download=r.filename||"solar-eclipse.gif",link.dispatchEvent(new MouseEvent("click"));case 12:case"end":return o.stop()}}),o)})))()}},watch:{cameraPos:{deep:!0,handler:function(t){if("globe"==this.type){var e=t||{},n=Object(base.e)(e.lon||0),r=Object(o.a)(n,2),l=r[0],c=r[1],f=Object(base.e)(e.lat||0),d=Object(o.a)(f,2),h=d[0],m=d[1],v=e.distance||4;this.camera.position.set(v*m*c,v*h,v*m*l),this.controls&&this.controls.update(),this.render()}}},scale:function(t){this.doScale(t),this.render()},type:function(t){this.mesh.geometry=this.models[t],this.uniform.isAe.value="ae"==t?1:0,this.doScale(this.scale),this.controls.enableRotate=this.control&&"globe"==t,"globe"!=t&&this.camera.position.set(0,0,4),this.render()},path:function(t){this.uniform.isPath.value=t?1:0,this.render()},control:function(t){this.controls.enableRotate=t&&"globe"==this.type,this.render()}}},m=h,v=n(8),component=Object(v.a)(m,(function(){return(0,this._self._c)("div",{staticStyle:{display:"flex","justify-content":"center"}})}),[],!1,null,null,null);e.default=component.exports},576:function(t,e,n){"use strict";n(552)},577:function(t,e,n){var o=n(43)(!1);o.push([t.i,"table.element th{margin-left:5px}",""]),t.exports=o},593:function(t,e,n){"use strict";n.r(e);n(25),n(33),n(12),n(60),n(49);var o=n(13),base=(n(42),n(90),n(4)),r=Math.sin,l=Math.cos,c=(Math.tan,Math.PI),f=(Math.abs,{props:{eclipse:Object,info:{type:Object,default:function(){return{type:0,date:null}}}},data:function(){var t=this.info,e=1.00273790935*this.info.deltaT*(2*c/24/3600);return{deltaTMu:e,uniform:{esq:{value:.006694381},x:{value:0},y:{value:0},sind:{value:0},cosd:{value:0},mu:{value:0},l1:{value:0},l2:{value:0},tanf1:{value:t.tanF1},tanf2:{value:t.tanF2},deltaTMu:{value:e},X:{value:t.x.slice(0,4)},Y:{value:t.y.slice(0,4)},D:{value:t.d.slice(0,4)},MU:{value:t.μ.slice(0,4)},L1:{value:t.l1.slice(0,4)},L2:{value:t.l2.slice(0,4)},DX:{value:t.x.slice(1,5).map((function(t,i){return t*(i+1)}))},DY:{value:t.y.slice(1,5).map((function(t,i){return t*(i+1)}))},DD:{value:t.d.slice(1,5).map((function(t,i){return t*(i+1)}))},DMU:{value:t.μ.slice(1,5).map((function(t,i){return t*(i+1)}))}},slider:500,cameraPos:{lat:0,lon:0,distance:4},scale:100,options:{model:"globe",rotation:!0,path:!0},save:{progress:0,cancel:!1},intervalID:null}},mounted:function(){this.updatePath(this.bessel)},methods:{run:function(){if(this.onPlay)clearInterval(this.intervalID),this.intervalID=null;else{var th=this;this.intervalID=setInterval((function(){th.slider+=1,th.slider>=1e3&&(clearInterval(th.intervalID),th.intervalID=null)}),100)}},updatePath:function(t){var e=this.uniform;e.x.value=t.x,e.y.value=t.y,e.mu.value=t.μ-this.deltaTMu,e.sind.value=r(t.d),e.cosd.value=l(t.d),e.l1.value=t.l1,e.l2.value=t.l2,this.options.rotation&&(this.cameraPos.lon=t.μ,this.cameraPos.lat=t.d)},simpan:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var th,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return th=t,n=t.info,n.p1,n.p4,o={duration:30,fps:10,filename:"solar-eclipse-".concat(th.info.date,".gif")},t.save.cancel=!1,t.$refs.popupSave.modal("show"),e.next=7,t.$refs.map.download((function(i){if(th.slider=1e3*i,th.save.progress=Math.floor(100*i),th.save.cancel)return!1}),o);case 7:t.$refs.popupSave.modal("hide");case 8:case"end":return e.stop()}}),e)})))()}},computed:{time:function(){var t=this.info,e=t.p1;return e+(t.p4-e)*this.slider/1e3},sTime:function(){var t=this.info.JDE0+(this.time-this.info.deltaT/3600)/24;return moment(t.toDate()).utc().format("DD MMMM YYYY, hh:mm:ss [UTC]")},bessel:function(){var t=this.time,e=this.info,n={};return["x","y","μ","d","l1","l2"].forEach((function(o){n[o]=Object(base.c)(t,e[o])})),n.μ=Object(base.d)(n.μ,2*c),n},onPlay:function(){return null!=this.intervalID}},watch:{"options.rotation":function(t){if(t){var e=this.bessel;this.cameraPos.lon=e.μ,this.cameraPos.lat=e.d}},slider:function(){this.updatePath(this.bessel)}}}),d=(n(576),n(8)),component=Object(d.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("lte-card",{attrs:{title:t.sTime},on:{resize:function(e){return t.$refs.map.resize(300)}},scopedSlots:t._u([{key:"tools",fn:function(){return[e("button",{staticClass:"btn btn-tool",on:{click:t.simpan}},[e("i",{staticClass:"fas fa-save"})])]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("button",{staticClass:"btn btn-sm btn-flat",on:{click:t.run}},[e("i",{staticClass:"fas",class:{"fa-play":!t.onPlay,"fa-stop":t.onPlay}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.slider,expression:"slider",modifiers:{number:!0}}],staticStyle:{width:"90%"},attrs:{type:"range",min:"0",max:"1000"},domProps:{value:t.slider},on:{__r:function(e){t.slider=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"col-12 col-lg-6"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],staticStyle:{width:"100%"},attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.scale},on:{__r:function(e){t.scale=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"col-4 col-lg-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.options.model,expression:"options.model"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.options,"model",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:"globe"}},[t._v("Globe")]),t._v(" "),e("option",{attrs:{value:"mer"}},[t._v("Mercator")]),t._v(" "),e("option",{attrs:{value:"ae"}},[t._v("AE")])])]),t._v(" "),"globe"==t.options.model?e("div",{staticClass:"col-4 col-lg-2"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.options.rotation,expression:"options.rotation"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"ck_rotation"},domProps:{checked:Array.isArray(t.options.rotation)?t._i(t.options.rotation,null)>-1:t.options.rotation},on:{change:function(e){var n=t.options.rotation,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=t._i(n,null);o.checked?l<0&&t.$set(t.options,"rotation",n.concat([null])):l>-1&&t.$set(t.options,"rotation",n.slice(0,l).concat(n.slice(l+1)))}else t.$set(t.options,"rotation",r)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"ck_rotation"}},[t._v("Rotasi")])])]):t._e(),t._v(" "),e("div",{staticClass:"col-4 col-lg-2"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.options.path,expression:"options.path"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"ck_rotation"},domProps:{checked:Array.isArray(t.options.path)?t._i(t.options.path,null)>-1:t.options.path},on:{change:function(e){var n=t.options.path,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=t._i(n,null);o.checked?l<0&&t.$set(t.options,"path",n.concat([null])):l>-1&&t.$set(t.options,"path",n.slice(0,l).concat(n.slice(l+1)))}else t.$set(t.options,"path",r)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"ck_rotation"}},[t._v("Path")])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("a-se-map",{ref:"map",attrs:{type:t.options.model,scale:t.scale,control:!t.options.rotation,uniform:t.uniform,"camera-pos":t.cameraPos,path:t.options.path}})],1)])])],1),t._v(" "),e("portal",{attrs:{to:"modals"}},[e("lte-modal",{ref:"popupSave",attrs:{size:"sm","data-backdrop":"static",title:"Download GIF"},on:{hide:function(e){t.save.cancel=!0}}},[e("p",[t._v(t._s(t.save.progress)+"% Complete")]),t._v(" "),e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar bg-primary progress-bar-striped",style:{width:t.save.progress+"%"},attrs:{role:"progressbar","aria-valuenow":t.save.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e("span",{staticClass:"sr-only"},[t._v(t._s(t.save.progress)+"% Complete")])])])])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ASeMap:n(554).default,LteCard:n(350).default,LteModal:n(355).default})}}]);