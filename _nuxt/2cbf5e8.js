(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{497:function(n,t,e){"use strict";e.d(t,"a",(function(){return l}));var o=e(13),r=(e(42),e(508),e(12),e(509),e(510),e(511),e(512),e(513),e(515),e(516),e(517),e(518),e(519),e(520),e(521),e(522),e(523),e(524),e(525),e(526),e(527),e(528),e(529),e(530),e(531),e(532),e(533),e(534),e(90),e(535).GifWriter);function l(element,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=t.duration||10,l=t.fps||30,f=t.depth||25,c=e*l,canvas=document.createElement("canvas");canvas.width=element.width,canvas.height=element.height;var m=canvas.getContext("2d"),d=new Uint8Array(canvas.width*canvas.height*c*5),h=new Uint8Array(canvas.width*canvas.height),v=new r(d,canvas.width,canvas.height,{loop:0}),w=0;return new Promise(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(o){var data,r,x,y,S,L,g,b,D,E,H,F,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==n(w/c)){t.next=3;break}return o(d.subarray(0,v.end())),t.abrupt("return");case 3:for(m.drawImage(element,0,0),data=m.getImageData(0,0,canvas.width,canvas.height).data,r=[],x=0,y=0,S=data.length;x<S;x+=4,y++)L=Math.floor(data[x+0]/f)*f,g=Math.floor(data[x+1]/f)*f,b=Math.floor(data[x+2]/f)*f,D=L<<16|g<<8|b<<0,-1===(E=r.indexOf(D))?(h[y]=r.length,r.push(D)):h[y]=E;for(H=1;H<r.length;)H<<=1;if(r.length=H,F=100/l,O={palette:new Uint32Array(r),delay:F},v.addFrame(0,0,canvas.width,canvas.height,h,O),w++,O.callback&&O.callback(w/c),!(w<c)){t.next=20;break}return t.next=18,setTimeout(e,0,o);case 18:t.next=21;break;case 20:o(d.subarray(0,v.end()));case 21:case"end":return t.stop()}}),t)})));function e(n){return t.apply(this,arguments)}return e}())}},498:function(n,t,e){"use strict";t.a="varying vec2 vUv;\nvoid main()\n{\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}"},554:function(n,t,e){"use strict";e.r(t);var o=e(26),r=e(13),l=(e(42),e(351),e(12),e(30),e(90),e(31),e(490),e(153),e(506)),f=e(507),base=e(4),c=e(497),m=e(498),d={props:{type:{type:String,default:"globe"},texture:{type:[String,Object],default:"images/earth_white_1280.png"},uniform:{type:Object,default:function(){return{}}},cameraPos:Object,scale:{type:Number,default:100},control:{type:Boolean,default:!0},part:{type:String,default:"all"}},data:function(){var n={globe:new l.j(1,128,64),mer:new l.f(2,2),ae:new l.a(1,64)};this.uniform.txtr={value:(new l.m).load(this.texture)},this.uniform.isAe={value:"ae"==this.type?1:0},this.uniform.isPath={value:"shadow"!=this.part?1:0},this.uniform.isShadow={value:"path"!=this.part?1:0};var t=new l.i({uniforms:this.uniform,vertexShader:m.a,fragmentShader:"const float THRESHOLD = 0.0015;\nconst float THRESHOLD2 = 0.0025;\n\nstruct TElement{\n    // float x;\n    // float y;\n    // float mu;\n    // float d;\n    // float dx;\n    // float dy;\n    // float dmu;\n    // float dd;\n\n    float d;\n    float l1;\n    float l2;\n    float a;\n    float b;\n    float u;\n    float v;\n    float n2;\n    float zeta;\n    float dmu;\n    float theta;\n};\nstruct TLocData{\n    float lat;\n    float lon;\n    float rhoC;\n    float rhoS;\n};\nTLocData loc;\n\n// uniform float esq;\n// uniform float mu;\n// uniform float x;\n// uniform float y;\n// uniform float cosd;\n// uniform float sind;\n// uniform float l1;\n// uniform float l2;\n\nuniform float tanF1;\nuniform float tanF2;\nuniform float time;\nuniform float deltaTMu;\nuniform int isAe;\nuniform int isPath;\nuniform int isShadow;\n\nuniform float X[4];\nuniform float Y[4];\nuniform float D[4];\nuniform float MU[4];\nuniform float L1[4];\nuniform float L2[4];\nuniform float DX[4];\nuniform float DY[4];\nuniform float DD[4];\nuniform float DMU[4];\n//uniform float DL1[4];\n//uniform float DL2[4];\nuniform sampler2D txtr;\nvarying vec2 vUv;\n\nfloat horner(float t, float series[4]){\n    int i = 3;\n    float result = series[i];\n    while(i > 0){\n        i--;\n        result = result*t + series[i];\n    }\n    return result;\n}\n\nTElement calcElem(float t){\n    TElement result;\n    float x = horner(t, X);\n    float y = horner(t, Y);\n    float d = horner(t, D);\n    float mu = horner(t, MU);\n    float dx = horner(t, DX);\n    float dy = horner(t, DY);\n    float dd = horner(t, DD);\n    float dmu = horner(t, DMU);\n    float l1 = horner(t, L1);\n    float l2 = horner(t, L2);\n    \n    float theta = mu + loc.lon;\n    float xi = loc.rhoC * sin(theta);\n    float eta = loc.rhoS * cos(d) - loc.rhoC * sin(d) * cos(theta);\n    float zeta = loc.rhoS * sin(d) + loc.rhoC * cos(d) * cos(theta);\n    float u = x - xi;\n    float v = y - eta;\n    float dxi = dmu * loc.rhoC * cos(theta);\n    float deta = dmu * xi * sin(d) - zeta * dd;\n    \n    float a = dx - dxi;\n    float b = dy - deta;\n    float n2 = a*a + b*b;\n\n    result.d = d;\n    result.a = a;\n    result.b = b;\n    result.u = u;\n    result.v = v;\n    result.zeta = zeta;\n    result.n2 = n2;\n    result.l1 = l1 - zeta * tanF1;\n    result.l2 = l2 - zeta * tanF1;\n    result.theta = theta;\n    result.dmu = dmu;\n    return result;\n}\n\nvoid main(void){\n    vec2 position = -1.0 + 2.0 * vUv;\n    loc.lat = radians(position.y * 90.0);\n    loc.lon = radians(position.x * 180.0);\n    vec2 pos = vec2(vUv.x, vUv.y);\n    if(isAe == 1){\n        float r = sqrt(position.y*position.y+position.x*position.x);\n        loc.lat = radians(90.0 - 180.0*r);    \n        loc.lon = atan(position.y,position.x);        \n        pos.x = loc.lon / 3.14159 / 2.0 + 0.5;\n        pos.y = 1.0 - r;\n    }\n    \n    TElement elem;\n    vec3 color = texture2D(txtr, pos).rgb;\n    float tmp = atan(0.99664719 * tan(loc.lat));\n    loc.rhoS = 0.99664719*sin(tmp);\n    loc.rhoC = cos(tmp);\n\n    gl_FragColor = vec4( color.x, color.y, color.z, 1.0 );\n    int pathFound = 0;\n    if(isPath == 1){\n        float t = 0.0;\n        float dt = 0.0;\n        int mid = 0;\n        for(int it=0; it < 15; it++){\n            elem = calcElem(t);\n            dt = (elem.u*elem.a + elem.v*elem.b) / elem.n2;\n            t -= dt;\n            if(dt > -0.00001 && dt < 0.00001){\n                mid = 1;\n                break;\n            }\n        }\n        if(mid == 1 && elem.zeta >= 0.0){\n            float m = sqrt(elem.u * elem.u + elem.v * elem.v);\n            if((m - elem.l1) < THRESHOLD && (m - elem.l1) > -THRESHOLD2){ // penumbra\n                gl_FragColor = vec4(0.0, 0.0, 0.8, 1.0 );\n                pathFound = 1;\n            }else if(elem.l2 > 0.0 && (m - elem.l2) < THRESHOLD && (m - elem.l2) > -THRESHOLD2){ // cincin\n                gl_FragColor = vec4(0.8, 0.0, 0.0, 1.0 );\n                pathFound = 1;\n            }else if(elem.l2 < 0.0 && (m + elem.l2) < THRESHOLD && (m + elem.l2) > -THRESHOLD2){ // total\n                gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0 );\n                pathFound = 1;\n            }\n        }\n\n        // terbit terbenam\n        float _acosH0;\n        float _h0;\n        for(float riset=-1.0; riset<=1.1; riset+=2.0){\n            if(pathFound == 0){\n                t = 0.0;\n                mid = 0;\n                for(int it=0; it<=5; it++){\n                    elem = calcElem(t);\n                    _acosH0 = (sin(-0.00524) - sin(loc.lat)*sin(elem.d))/(cos(loc.lat)*cos(elem.d));\n                    if(_acosH0 > 1.0 || _acosH0 < -1.0){\n                        break;\n                    }\n                    _h0 = acos(_acosH0);\n                    dt = (riset * _h0 - elem.theta)/elem.dmu;\n                    while(dt >= 12.0) dt -= 24.0;\n                    while(dt <= -12.0) dt += 24.0;\n                    t += dt;\n                    if(dt > -0.0001 && dt < 0.0001){\n                        mid = 1;\n                        break;\n                    }\n                }\n                if(mid == 1){\n                    float m = sqrt(elem.u * elem.u + elem.v * elem.v);\n                    if((m - elem.l1) < 2.0*THRESHOLD && (m - elem.l1) > -2.0*THRESHOLD2){\n                        gl_FragColor = vec4(0.0, 0.8, 8.0, 1.0 );\n                        pathFound = 1;\n                    }\n                }\n            }\n        }\n    }\n    \n    if(isShadow == 1){\n        if(pathFound == 0){\n            elem = calcElem(time);\n            float m = sqrt(elem.u * elem.u + elem.v * elem.v);\n            float L1 = elem.l1;\n            float L2 = elem.l2;\n            if (elem.zeta < 0.0){\n                float fac = 0.4;\n                gl_FragColor = vec4(color.x * fac, color.y * fac, color.z * fac, 1.0 );\n            } else if (L2 < 0.0 && m < -L2){\n                gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0 );\n            } else if (L2 > 0.0 && m < L2){\n                gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0 );\n            } else if (m < L1){\n                float f = 0.7 - 0.0 * (L1 - m) / L1;\n                gl_FragColor = vec4(color.x * f, color.y * f, color.z * f, 1.0 );\n            } else{\n                gl_FragColor = vec4( color.x, color.y, color.z, 1.0 );\n            }\n        }\n    }\n    \n}"}),data={animated:!0,camera:new l.e(-1.05,1.05,1.05,-1.05,.1,10),controls:null,scene:new l.h,renderer:new l.p,models:n,material:t,mesh:new l.d(n[this.type],t)};return data.camera.position.set(0,0,4),data.renderer.setPixelRatio(window.devicePixelRatio),data.mesh.position.x=0,data.mesh.position.y=0,data.scene.add(data.mesh),data},mounted:function(){var th=this;this.$el.appendChild(this.renderer.domElement),this.animate(),this.resize(),this.$nuxt.$on("pushmenu-click",(function(){th.resize(300)})),window.addEventListener("resize",(function(){th.resize()}));var n=this.controls=new f.a(this.camera,this.$el);n.rotateSpeed=1,n.zoomSpeed=1.2,n.panSpeed=.8,n.enableZoom=!1,n.enablePan=!1,n.staticMoving=!0,n.dynamicDampingFactor=.3,n.keys=[65,83,68],n.autoRotate=!1,n.addEventListener("change",(function(){th.render()})),n.enableRotate=this.control&&"globe"==this.type},methods:{render:function(){this.renderer.render(this.scene,this.camera)},animate:function(){var th=this;requestAnimationFrame((function(){th.animate()})),th.controls&&th.controls.update(),this.animated&&th.render()},doScale:function(n){var t=Math.min(100,Math.max(10,n)),e=Math.floor(this.$el.offsetWidth*t/100),o="mer"==this.type?e/2:e;this.renderer.setSize(e,o)},resize:function(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,th=this;setTimeout((function(){th.camera.aspect=1,th.camera.updateProjectionMatrix(),th.doScale(th.scale)}),time)},download:function(n){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,th,l,f,link;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{},th=e,e.animated=!1,o.next=5,Object(c.a)(e.renderer.domElement,(function(progress){if(n&&!1===n(progress))return!1;th.render()}),r);case 5:l=o.sent,f=new Blob([l],{type:"image/gif"}),e.animated=!0,(link=document.createElement("a")).href=URL.createObjectURL(f),link.download=r.filename||"solar-eclipse.gif",link.dispatchEvent(new MouseEvent("click"));case 12:case"end":return o.stop()}}),o)})))()}},watch:{cameraPos:{deep:!0,handler:function(n){if("globe"==this.type){var t=n||{},e=Object(base.e)(t.lon||0),r=Object(o.a)(e,2),l=r[0],f=r[1],c=Object(base.e)(t.lat||0),m=Object(o.a)(c,2),d=m[0],h=m[1],v=t.distance||4;this.camera.position.set(v*h*f,v*d,v*h*l),this.controls&&this.controls.update(),this.render()}}},scale:function(n){this.doScale(n),this.render()},type:function(n){this.mesh.geometry=this.models[n],this.uniform.isAe.value="ae"==n?1:0,this.doScale(this.scale),this.controls.enableRotate=this.control&&"globe"==n,"globe"!=n&&this.camera.position.set(0,0,4),this.render()},part:function(n){this.uniform.isPath.value="shadow"!=n?1:0,this.uniform.isShadow.value="path"!=n?1:0,this.render()},control:function(n){this.controls.enableRotate=n&&"globe"==this.type,this.render()}}},h=d,v=e(8),component=Object(v.a)(h,(function(){return(0,this._self._c)("div",{staticStyle:{display:"flex","justify-content":"center"}})}),[],!1,null,null,null);t.default=component.exports}}]);